const ss=document.createElement("style");function multiSelect(e,u){document.querySelectorAll(e).forEach(function(e){var t=document.createElement("div");const o=document.createElement("input");o.type="text",o.value="[]",o.name=e.name,o.dataset.name=o.name,t.style="visibility:hidden;width:0px;height:0px;overflow:hidden;margin:0px;padding:0px;border:none;outline:none;position:absolute;pointer-events:none;",e.style="visibility:hidden;width:0px;height:0px;overflow:hidden;margin:0px;padding:0px;border:none;outline:none";var n=document.createElement("div");n.className="multiselect",e.insertAdjacentElement("afterend",n),t.appendChild(o),e.insertAdjacentElement("afterend",t);const i=document.createElement("div");i.className="multiselect_options text-field w-input",i.dataset.name=e.dataset.name||"",n.appendChild(i);let d=i.getBoundingClientRect(),a=!0;const l=document.createElement("div"),r=(l.className="multiselect_dropdown_box",document.body.appendChild(l),e=>{e.target!=i&&e.target.parentElement!=i&&e.target?.parentElement?.parentElement!=i&&l.classList.contains("active")&&l.classList.remove("active"),window.removeEventListener("mousedown",r)});function s(){d=i.getBoundingClientRect(),l.style.top=d.y+window.scrollY-l.getBoundingClientRect().height+"px",l.getBoundingClientRect().bottom+l.getBoundingClientRect().height>=window.innerHeight?(a=!1,l.classList.add("top")):(a=!0,l.classList.remove("top")),a?l.style.top=d.y+d.height+window.scrollY+"px":l.style.top=d.y+window.scrollY-l.getBoundingClientRect().height+"px",l.style.left=d.x+"px",l.style.right=d.right-d.width+"px"}i.addEventListener("click",e=>{l.classList.add("active"),window.addEventListener("mousedown",r),s()}),s();const c=t=>{t.preventDefault(),t.stopPropagation(),t.currentTarget.parentElement.remove();let e=JSON.parse(o.value);e=e.filter(e=>e!==t.currentTarget.dataset.value),o.value=JSON.stringify(e),console.log(o.value),l.querySelector(`[data-value="${t.currentTarget.dataset.value}"]`).classList.remove("added")},p=e=>{var t,n;e.currentTarget.classList.contains("added")?i.querySelector(`[data-value="${e.currentTarget.dataset.value}"]`).dispatchEvent(new Event("mouseup")):(e.preventDefault(),(t=document.createElement("div")).className="multi_option",(n=document.createElement("div")).className="multi_option_icon",n.innerHTML=u,n.dataset.value=e.currentTarget.dataset.value,n.addEventListener("mouseup",c),t.appendChild(n),t.insertAdjacentHTML("beforeend",`<div class="multi_option_text">${e.currentTarget.innerHTML}</div>`),i.appendChild(t),JSON.parse(o.value).push(e.currentTarget.dataset.value).toString(),(n=JSON.parse(o.value)).push(e.currentTarget.dataset.value),o.value=JSON.stringify(n),e.currentTarget.classList.add("added"))};e.querySelectorAll("option").forEach(e=>{var t=document.createElement("div");t.className="multiselect_dropdown",t.innerHTML=e.innerHTML,t.dataset.value=e.value,l.appendChild(t),t.addEventListener("mousedown",p)}),e.style.display="none"})}ss.textContent=`
.multiselect {
    position: relative;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  .multiselect_options::after {
    content: attr(data-name);
    color: #999999;
    margin-left: 12px;
  }

  .multiselect_options:has(> .multi_option).multiselect_options::after {
    display: none;
  }

  .multiselect_options {
    cursor: text;
    padding: 4px;
    border: .5px solid #9d9d9d;
    min-height: 38px;
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    height: auto !important ;
    align-items:center;
  }
  
  .multi_option {
    display: flex;
    cursor: default;
    border: #fff solid .5px;
    border-radius: 3px;
    background: #ddd;
    color: #000;
    height: 100%;
    align-items: center;
  }
  
  .multi_option_icon {
    padding: 5px;
    border-right: #fff solid .5px;
  }
  
  .multi_option_text {
    padding: 4px 10px;
  }
  
  .multi_option_icon {
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }
  
  .multi_option_icon svg {
    width: 14px;
    height: 14px;
    background-color: #fff;
    border-radius: 50%;
  }
  
  .multiselect_dropdown_box {
    display: none;
    position: absolute;
    z-index: 9999;
    background: #fff;
    max-height: 150px;
    overflow-y: auto;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, .10);
  }
  
  .multiselect_dropdown_box.active {
    display: block;
  }
  
  .multiselect_dropdown {
    padding: 7px 10px;
    border: .5px solid #9d9d9d;
    border-top: none;
    cursor: pointer;
  }
  
  .multiselect_dropdown.added {
    background: #ddd;
  }
  
  .multiselect_dropdown:hover {
    background: rgb(58, 156, 255);
    color: #fff;
  }
  
  .multiselect_dropdown_box.active.top .multiselect_dropdown:first-child {
    border-radius: 5px 5px 0px 0px;
  }

  .multiselect_dropdown_box.active.top .multiselect_dropdown:last-child {
    border-radius: 0px ;
  }

  .multiselect_dropdown:first-child {
    border-top: .5px solid #9d9d9d;

  }
  
  .multiselect_dropdown:last-child {
    border-radius: 0px 0px 5px 5px;
  }
`,document.body.appendChild(ss);