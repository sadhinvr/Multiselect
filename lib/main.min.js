const ss=document.createElement("style");function multiSelect(e,u){document.querySelectorAll(e).forEach(function(e){var t=document.createElement("div");const i=document.createElement("input");i.type="text",i.name=e.name,i.className="mul_inp_hidden",i.required=e.required,i.dataset.name=i.name,t.style="visibility:hidden;width:0px;height:0px;overflow:hidden;margin:0px;padding:0px;border:none;outline:none;position:absolute;pointer-events:none;",e.style="visibility:hidden;width:0px;height:0px;overflow:hidden;margin:0px;padding:0px;border:none;outline:none";var n=document.createElement("div");n.className="multiselect",e.insertAdjacentElement("afterend",n),t.appendChild(i),e.insertAdjacentElement("afterend",t);const o=document.createElement("div");o.className="multiselect_options text-field w-input",o.dataset.name=e.dataset.name||"",n.appendChild(o);let d=o.getBoundingClientRect(),l=!0;const a=document.createElement("div"),r=(a.className="multiselect_dropdown_box",document.body.appendChild(a),e=>{e.target!=o&&e.target.parentElement!=o&&e.target?.parentElement?.parentElement!=o&&a.classList.contains("active")&&a.classList.remove("active"),window.removeEventListener("mousedown",r)});function s(){d=o.getBoundingClientRect(),a.style.top=d.y+window.scrollY-a.getBoundingClientRect().height+"px",a.getBoundingClientRect().bottom+a.getBoundingClientRect().height>=window.innerHeight?(l=!1,a.classList.add("top")):(l=!0,a.classList.remove("top")),l?a.style.top=d.y+d.height+window.scrollY+"px":a.style.top=d.y+window.scrollY-a.getBoundingClientRect().height+"px",a.style.left=d.x+"px",a.style.right=d.right-d.width+"px"}o.addEventListener("click",e=>{a.classList.add("active"),window.addEventListener("mousedown",r),s()}),s();const c=t=>{t.preventDefault(),t.stopPropagation(),t.currentTarget.parentElement.remove();let e=i.value?i.value.split(","):[];e=e.filter(e=>e!==t.currentTarget.dataset.value),i.value=e.join(),i.dispatchEvent(new Event("change")),console.log(i.value),a.querySelector(`[data-value="${t.currentTarget.dataset.value}"]`).classList.remove("added")},p=e=>{var t,n;e.currentTarget.classList.contains("added")?o.querySelector(`[data-value="${e.currentTarget.dataset.value}"]`).dispatchEvent(new Event("mouseup")):(e.preventDefault(),(t=document.createElement("div")).className="multi_option",(n=document.createElement("div")).className="multi_option_icon",n.innerHTML=u,n.dataset.value=e.currentTarget.dataset.value,n.addEventListener("mouseup",c),t.appendChild(n),t.insertAdjacentHTML("beforeend",`<div class="multi_option_text">${e.currentTarget.innerHTML}</div>`),o.appendChild(t),(n=i.value?i.value.split(","):[]).push(e.currentTarget.dataset.value),i.value=n.join(),i.dispatchEvent(new Event("change")),console.log(i.value),e.currentTarget.classList.add("added"))};e.querySelectorAll("option").forEach(e=>{var t=document.createElement("div");t.className="multiselect_dropdown",t.innerHTML=e.innerHTML,t.dataset.value=e.value,a.appendChild(t),t.addEventListener("mousedown",p)}),e.style.display="none"})}ss.textContent=`
.multiselect {
    position: relative;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
    width:100%;
  }
  
  .multiselect_options::after {
    content: attr(data-name);
    color: #999999;
    margin-left: 12px;
  }

  .multiselect_options:has(> .multi_option).multiselect_options::after {
    display: none;
  }

  .multiselect_options {
    cursor: text;
    padding: 4px;
    border: .5px solid #9d9d9d;
    min-height: 38px;
    display: flex;
    flex-wrap: wrap;
    gap: 5px;
    height: auto !important ;
    align-items:center;
  }
  
  .multi_option {
    display: flex;
    cursor: default;
    border: #fff solid .5px;
    border-radius: 3px;
    background: #ddd;
    color: #000;
    height: 100%;
    align-items: center;
  }
  
  .multi_option_text {
    padding: 4px 10px;
  }
  
  .multi_option_icon {
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    padding: 4px;
    border-right: #fff solid .5px;
  }
  
  .multi_option_icon svg,.multi_option_icon img {
    width: 20px;
    height: 20px;
    background-color: #fff;
    border-radius: 50%;
    margin: 0;
    padding: 3px;
  }
  
  .multiselect_dropdown_box {
    display: none;
    position: absolute;
    z-index: 9999;
    background: #fff;
    max-height: 203px;
    overflow-y: auto;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, .10);
  }
  
  .multiselect_dropdown_box.active {
    display: block;
  }
  
  .multiselect_dropdown {
    padding: 7px 10px;
    border: .5px solid #9d9d9d;
    border-top: none;
    cursor: pointer;
  }
  
  .multiselect_dropdown.added {
    background: #ddd;
  }
  
  .multiselect_dropdown:hover {
    background: rgb(58, 156, 255);
    color: #fff;
  }
  
  .multiselect_dropdown_box.active.top .multiselect_dropdown:first-child {
    border-radius: 5px 5px 0px 0px;
  }

  .multiselect_dropdown_box.active.top .multiselect_dropdown:last-child {
    border-radius: 0px ;
  }

  .multiselect_dropdown:first-child {
    border-top: .5px solid #9d9d9d;

  }
  
  .multiselect_dropdown:last-child {
    border-radius: 0px 0px 5px 5px;
  }
`,document.body.appendChild(ss);