function multiSelect(e,n){var e=document.querySelector(e),t=document.createElement("div");const l=document.createElement("input");l.type="text",l.value="[]",l.name=e.name,l.dataset.name=l.name,t.style="visibility:hidden;width:0px;height:0px;overflow:hidden;margin:0px;padding:0px;border:none;outline:none",e.style="visibility:hidden;width:0px;height:0px;overflow:hidden;margin:0px;padding:0px;border:none;outline:none";var a=document.createElement("div");a.className="multiselect",e.insertAdjacentElement("afterend",a),t.appendChild(l),e.insertAdjacentElement("afterend",t);const r=document.createElement("div"),d=(r.className="multiselect_options",a.appendChild(r),document.createElement("div"));d.className="multiselect_dropdown_box",a.appendChild(d);window.addEventListener("mousedown",e=>{e.target!=r&&e.target.parentElement!=r&&e.target.parentElement.parentElement!=r&&d.classList.contains("active")&&d.classList.remove("active")}),r.addEventListener("mouseup",e=>{d.classList.toggle("active")});const i=t=>{t.preventDefault(),t.stopPropagation(),t.currentTarget.parentElement.remove();let e=JSON.parse(l.value);e=e.filter(e=>e!==t.currentTarget.dataset.value),l.value=JSON.stringify(e),console.log(l.value),d.querySelector(`[data-value="${t.currentTarget.dataset.value}"]`).classList.remove("added")},s=e=>{var t,a;e.currentTarget.classList.contains("added")?r.querySelector(`[data-value="${e.currentTarget.dataset.value}"]`).dispatchEvent(new Event("mouseup")):(e.preventDefault(),(t=document.createElement("div")).className="multi_option",(a=document.createElement("div")).className="multi_option_icon",a.innerHTML=n,a.dataset.value=e.currentTarget.dataset.value,a.addEventListener("mouseup",i),t.appendChild(a),t.insertAdjacentHTML("beforeend",`<div class="multi_option_text">${e.currentTarget.innerHTML}</div>`),r.appendChild(t),JSON.parse(l.value).push(e.currentTarget.dataset.value).toString(),(a=JSON.parse(l.value)).push(e.currentTarget.dataset.value),l.value=JSON.stringify(a),console.log(l.value),e.currentTarget.classList.add("added"))};e.querySelectorAll("option").forEach(e=>{var t=document.createElement("div");t.className="multiselect_dropdown",t.innerHTML=e.innerHTML,t.dataset.value=e.value,d.appendChild(t),t.addEventListener("mousedown",s)}),e.style.display="none"}var i=` <svg viewBox="0 0 511.76 511.76"><g>
  <path
    d="M436.896 74.869c-99.84-99.819-262.208-99.819-362.048 0-99.797 99.819-99.797 262.229 0 362.048 49.92 49.899 115.477 74.837 181.035 74.837s131.093-24.939 181.013-74.837c99.819-99.818 99.819-262.229 0-362.048zm-75.435 256.448c8.341 8.341 8.341 21.824 0 30.165a21.275 21.275 0 0 1-15.083 6.251 21.277 21.277 0 0 1-15.083-6.251l-75.413-75.435-75.392 75.413a21.348 21.348 0 0 1-15.083 6.251 21.277 21.277 0 0 1-15.083-6.251c-8.341-8.341-8.341-21.845 0-30.165l75.392-75.413-75.413-75.413c-8.341-8.341-8.341-21.845 0-30.165 8.32-8.341 21.824-8.341 30.165 0l75.413 75.413 75.413-75.413c8.341-8.341 21.824-8.341 30.165 0 8.341 8.32 8.341 21.824 0 30.165l-75.413 75.413 75.415 75.435z"
    fill="currentColor" ></path>
</g>
</svg> `;multiSelect("select[multiple]",i);